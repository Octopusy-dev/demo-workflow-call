name: Reusable Demo Workflow with Outputs

# trigger declanchement du workflow 
on:
  workflow_call:
    # DÃ©finition des inputs que le workflow appelant peut fournir
    inputs:
      project-name:
        description: "Nom du projet"
        required: false
        default: "MonProjet"
        type: string
    # DÃ©finition des outputs que le workflow retournera Ã  l'appelant
    outputs:
      build-status:
        description: "Statut du build"
        value: ${{ jobs.build.outputs.build-status }}

jobs:
  build:
    runs-on: ubuntu-latest
    # DÃ©claration de l'output du job, utilisÃ© pour l'output global du workflow
    outputs:
      build-status: ${{ steps.build-step.outputs.status }}

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4  # On clone le dÃ©pÃ´t

      - name: Simulate build
        id: build-step  # NÃ©cessaire pour rÃ©cupÃ©rer l'output
        run: |
          # Ici on simule un build
          echo "ðŸš€ Building project ${{ inputs.project-name }}..."
          # DÃ©claration de l'output du step qui sera utilisÃ© par le job
          echo "status=success" >> $GITHUB_OUTPUT

